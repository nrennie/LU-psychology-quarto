---
title: "Introduction to Quarto for Research"
subtitle: "<small>9 May 2024</small>"
author: "Dr Nicola Rennie"
format:
  LUstyle-revealjs:
    self-contained: true
    footer: "{{< fa envelope >}} [n.rennie@lancaster.ac.uk](mailto:n.rennie@lancaster.ac.uk) {{< fa globe >}} [nrennie.rbind.io](https://nrennie.rbind.io/) {{< fa brands linkedin >}} [nicola-rennie](https://www.linkedin.com/in/nicola-rennie/)<br>[nrennie.rbind.io/LU-psychology-quarto](https://nrennie.rbind.io/LU-psychology-quarto/)"
---

# Welcome!

## About me

::: columns
::: {.column .right}

Lecturer in Health Data Science in the [Centre for Health Informatics, Computing, and Statistics](https://chicas.lancaster-university.uk/).

<br>

Academic background in statistics and operational research. Industry experience in statistics and data science consultancy.

<br>

Organiser of R-Ladies Lancaster, and part of R-Ladies Global team.

:::

::: {.column}

![](images/CHICASlogo.png){fig-align="center" fig-alt="CHICASlogo" width=80%}

:::
:::


## What to expect during this workshop

The workshop will run for *2 hours* this morning and *2 hours* this afternoon.

* Combines slides, live coding examples, quiz questions, and exercises for you to participate in.

* Ask questions throughout!

## Workshop resources

* GitHub: [github.com/nrennie/LU-psychology-quarto](https://github.com/nrennie/LU-psychology-quarto)

* Slides: [nrennie.rbind.io/LU-psychology-quarto](https://nrennie.rbind.io/LU-psychology-quarto)

# Introduction to Quarto {background-color="#D9DBDB"}

## How do you write your journal articles?

::: {.fragment}

* Microsoft Word?

* LaTeX?

* R Markdown?

:::

## What is Quarto?

Quarto is an open-source scientific and technical publishing system [that allows you to combine text, images, code, plots, and tables in a fully-reproducible document.]{.fragment}

[Quarto has support for multiple languages including R, Python, Julia, and Observable.]{.fragment} [It also works for a range of output formats such as PDFs, HTML documents, websites, presentations,...]{.fragment}

## Why is Quarto good for reproducible research?


## What about R Markdown?

R Markdown isn't going anywhere but...

* Quarto has better multi-language support

* More user-friendly

* Better control of the output layouts

# Your first Quarto document {background-color="#D9DBDB"}

## Creating a document

<p style="text-align:center;">
<img src="images/new_doc.gif" alt="Gif of creating a new quarto document" width="50%">
</p>

## Quarto in RStudio

* yaml prompts
* render button
* visual editor

## Predictive YAML (and code block options)

<p style="text-align:center;">
<img src="images/yaml.gif" alt="Gif of predictive yaml in a quarto document" width="50%">
</p>


## Rendering a document

Within RStudio IDE: click **Render** (or Ctrl+Shift+K)

. . . 

<br>

Using {quarto}

```{r}
#| eval: false
#| echo: true
library(quarto)
quarto_render("document.qmd")
```

. . .

<br>

Using the command line

``` bash
quarto render document.qmd
```

## What makes a Quarto document?

YAML header

``` yaml
---
title: "A very cool title"
format: html
---
```

. . . 

Content

* Text, links, images

* Code, tables, plots

* Equations, references


## Output types

::: {.incremental}

* Documents: HTML, PDF, MS Word, Markdown

* Presentations: Revealjs, PowerPoint, Beamer

* Websites

* Books

* ...

:::

## Demo 1

## Exercise 1

Open `exercises/Exercise 1/README.md` for prompts.

* Create a new Quarto HTML document.
* Fill in the YAML options with a title and author.
* Render your document.
* Change the format to `docx`.
* Re-render your document.
* What about PDF?

```{r}
#| label: ex-1-timer
countdown::countdown(
  minutes = 10,
  color_border = "#b20e10",
  color_text = "#b20e10",
  color_running_text = "white",
  color_running_background = "#b20e10",
  color_finished_text = "#b20e10",
  color_finished_background = "white",
  top = 0,
  margin = "1.2em",
  font_size = "2em"
)
```

. . . 

See `exercise_solutions/Exercise 1/exercise_01.qmd` for full solution.

# Document content {background-color="#D9DBDB"}

## Markdown syntax

* Lists
* 

## Including image files

* include
* image options align, cap

## Tables

## Links

## Exercise 2

Open `exercises/exercise_02.md` for prompts.

* Create a new Quarto HTML document.
* Fill in the YAML options with a title and author.
* Render your document.

```{r}
#| label: ex-2-timer
countdown::countdown(
  minutes = 10,
  color_border = "#b20e10",
  color_text = "#b20e10",
  color_running_text = "white",
  color_running_background = "#b20e10",
  color_finished_text = "#b20e10",
  color_finished_background = "white",
  top = 0,
  margin = "1.2em",
  font_size = "2em"
)
```

. . . 

See `exercise_solutions/exercise_solutions_02.qmd` for full solution.


# Code blocks {background-color="#D9DBDB"}

## Code block options

what are they, eval 

## Quarto vs R Markdown

```{r}
#| echo: fenced
#| eval: false
#| warning: false
2 + 2
```

. . . 

<br>

Comparing to R Markdown: 

````
```{{r, warning=FALSE, eval=FALSE}}
2 + 2
```

````

. . . 

<br>
```{r}
#| echo: true
#| eval: false
knitr::convert_chunk_header("document.qmd", output = identity)
```

## Code block options

Code visibility options:

* Hide the code
```yaml
#| echo: false
```
* Show the code
```yaml
#| echo: true
```
* Show the code and the YAML
```yaml
#| echo: fenced
```

## Code block options

````

```{{r}}
#| echo: fenced
#| eval: true
#| warning: false
#| error: false
#| output: asis
#| include: true
```

````

## Code block options

Figure options:


## Code block options

Output location: 


## Code block options

Highlight code:

## Code tables


## Global code block options

::: columns
::: {.column}

RMarkdown

````
```{{r}}
knitr::opts_chunk$set(echo = FALSE)
```
````

:::
::: {.column}

Quarto

``` yaml
---
title: "A very cool title"
format: html
execute:
  echo: false
---
```

:::
:::

## Exercise 3

Open `exercises/exercise_03.md` for prompts.

* Create a new Quarto HTML document.
* Fill in the YAML options with a title and author.
* Render your document.

```{r}
#| label: ex-3-timer
countdown::countdown(
  minutes = 10,
  color_border = "#b20e10",
  color_text = "#b20e10",
  color_running_text = "white",
  color_running_background = "#b20e10",
  color_finished_text = "#b20e10",
  color_finished_background = "white",
  top = 0,
  margin = "1.2em",
  font_size = "2em"
)
```

. . . 

See `exercise_solutions/exercise_solutions_03.qmd` for full solution.


# Referencing in Quarto {background-color="#D9DBDB"}


## Referencing results in text

Inline code

We can also include code inline, rather than as a separate chunk.

check r-ladies for syntax

## Figure references

external images
plots

## Table references

## Cross-referencing

references within a document

## Citations


## Exercise 4

Open `exercises/exercise_04.md` for prompts.

* Create a new Quarto HTML document.
* Fill in the YAML options with a title and author.
* Render your document.

```{r}
#| label: ex-4-timer
countdown::countdown(
  minutes = 10,
  color_border = "#b20e10",
  color_text = "#b20e10",
  color_running_text = "white",
  color_running_background = "#b20e10",
  color_finished_text = "#b20e10",
  color_finished_background = "white",
  top = 0,
  margin = "1.2em",
  font_size = "2em"
)
```

. . . 

See `exercise_solutions/exercise_solutions_04.qmd` for full solution.


# Formatting Quarto documents {background-color="#D9DBDB"}

## extensions

## journal templates

## output formats

keep-tex, word

## Manuscript format

## Exercise 5

Open `exercises/exercise_05.md` for prompts.

* Create a new Quarto HTML document.
* Fill in the YAML options with a title and author.
* Render your document.

```{r}
#| label: ex-5-timer
countdown::countdown(
  minutes = 10,
  color_border = "#b20e10",
  color_text = "#b20e10",
  color_running_text = "white",
  color_running_background = "#b20e10",
  color_finished_text = "#b20e10",
  color_finished_background = "white",
  top = 0,
  margin = "1.2em",
  font_size = "2em"
)
```

. . . 

See `exercise_solutions/exercise_solutions_05.qmd` for full solution.


# Collaborating {background-color="#D9DBDB"}

## GitHub

## {trackdown}

## VSCode ive Share

## Existing GH issue

# Discussion {background-color="#D9DBDB"}

## Examples of paper written in Quarto

## Nice features few of fav things

## Tricky things

## Quarto and R versions

* renv
* nix

## {targets}

## Converting from R Markdown

## Quarto extensions (e.g. journal article templates)

Templates: [github.com/quarto-journals](https://github.com/quarto-journals)

. . . 

``` yaml
---
title: "A very cool title"
format:
  pdf: default
  jss-pdf:
    keep-tex: true 
---
```

## Writing LaTeX

````
---
title: "A very cool title"
format: html
---

\begin{equation}
\hat{e}_i = Y_i - \hat{Y}_i
\end{equation}

````
. . .

\begin{equation}
\hat{e}_i = Y_i - \hat{Y}_i
\end{equation}


## Multiple columns

````

::: .columns
::: {.column width = "60%"}
The content for the first column goes here.
:::

::: {.column width = "40%"}
The content for the second column goes here.
:::
:::


````


## Code animation {auto-animate="true"}

```r
g <- ggplot(data = lemurs, 
            aes(x = name, y = n, fill = name)) +
  geom_col()
```

## Code animation {auto-animate=true}

```r
g <- ggplot(data = lemurs, 
            aes(x = name, y = n, fill = name)) +
  geom_col() +
  scale_fill_brewer(palette = "Dark2")
```

## Diagrams

````
```{dot}
graph G {
  qmd -- Knitr;
  qmd -- Jupyter;
  Knitr -- md;
  Jupyter -- md;
  md -- pandoc;
  pandoc -- HTML;
  pandoc -- PDF;
  pandoc -- Word;
  pandoc -- more;
}
```
````
## Diagrams

```{dot}
//| fig-align: center
//| fig-height: 5
graph G {
  bgcolor="#ffffff"
  qmd -- Knitr;
  qmd -- Jupyter;
  Knitr -- md;
  Jupyter -- md;
  md -- pandoc;
  pandoc -- HTML;
  pandoc -- PDF;
  pandoc -- Word;
  pandoc -- more;
}
```

## Parameterised documents

``` yaml
---
title: "A very cool title"
format: html
params:
  year: 2023
---
```
. . . 

Subset data based on parameters:

```{r}
#| eval: false
#| echo: true
data_subset <- data |>
  dplyr::filter(
    year == params$year
  )
```

## Parameterised documents

```{r}
#| eval: false
#| echo: true
quarto::quarto_render(
  input = "document.qmd",
  execute_params = list("year" = 2022)
)
```

. . . 

Map over multiple years with {purrr}:

```{r}
#| eval: false
#| echo: true
purrr::walk(2018:2022, ~ quarto::quarto_render(
  input = "document.qmd",
  execute_params = list("year" = .x),
  output_file = glue::glue("report_{.x}.html")
))
```


## Useful links

<br>

* Documentation: [quarto.org](https://quarto.org/) 

* GitHub Discussions: [github.com/quarto-dev/quarto-cli/discussions](https://github.com/quarto-dev/quarto-cli/discussions) 

* Intro Webinar: [jthomasmock.github.io/quarto-2hr-webinar](https://jthomasmock.github.io/quarto-2hr-webinar/) 

* Awesome Quarto List: [github.com/mcanouil/awesome-quarto](https://github.com/mcanouil/awesome-quarto)

## Workshop resources

<br>

* GitHub: [github.com/nrennie/LU-psychology-quarto](https://github.com/nrennie/LU-psychology-quarto)

* Slides: [nrennie.github.io/LU-psychology-quarto](https://nrennie.github.io/LU-psychology-quarto)


## 

::: columns
::: {.column}

<br>

{{< fa brands linkedin >}} [nicola-rennie](https://www.linkedin.com/in/nicola-rennie/)

{{< fa brands mastodon >}} [\@fosstodon.org/\@nrennie](https://fosstodon.org/deck/@nrennie)

{{< fa brands github >}} [nrennie](https://github.com/nrennie)

{{< fa globe >}} [nrennie.rbind.io](https://nrennie.rbind.io/)

{{< fa envelope >}} [n.rennie@lancaster.ac.uk](mailto:n.rennie@lancaster.ac.uk)

{{< fa briefcase >}} [chicas.lancaster-university.uk](https://chicas.lancaster-university.uk/)

:::
::: {.column}

![](images/qr-code.png){fig-align="center" fig-alt="QR code" width=70%}

:::
:::
